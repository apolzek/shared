receivers:
  kafka/traces:
    brokers:
      - kafka:29092
    topic: otel-traces
    encoding: otlp_proto
    group_id: otel-collector-traces-group
    protocol_version: 2.8.0
    initial_offset: earliest

  kafka/metrics:
    brokers:
      - kafka:29092
    topic: otel-metrics
    encoding: otlp_proto
    group_id: otel-collector-metrics-group
    protocol_version: 2.8.0

processors:

  memory_limiter:
    check_interval: 1s
    limit_mib: 100  
    spike_limit_mib: 20


  batch:
    timeout: 10s  
    send_batch_size: 100  
    send_batch_max_size: 150


  batch/slow:
    timeout: 15s
    send_batch_size: 50

  attributes:
    actions:
      - key: source.collector
        action: insert
        value: kafka-receiver
      - key: experiment
        action: insert
        value: backpressure-test

exporters:
  debug:
    verbosity: detailed

  prometheus:
    endpoint: "0.0.0.0:9005"
    enable_open_metrics: true

service:
  pipelines:
    traces:
      receivers: [kafka/traces]
      processors: [attributes]
      exporters: [debug]

    metrics:
      receivers: [kafka/metrics]
      processors: [attributes]
      exporters: [debug, prometheus]

  telemetry:
    metrics:
      level: detailed
      address: 0.0.0.0:9115

    logs:
      level: DEBUG
      output_paths: ["stdout"]
